<div id="map" style="border: solid 1px #000">
  <script type="text/javascript">
    var paper = new Raphael(document.getElementById('map'), 1200, 400);
    var worldProjection = d3.geo.mercator()
          .scale(600)
          .translate([330,280]);
 
    var border_color = "#444";
    var unsel_color = "#e0e0e0";
 
    $.getJSON('world.json', function(data) {
      svg_borders = {};
      $.each(data["features"], function(idx,feature) {
      country = feature.properties.name;
      svg_borders[country]=[];
      if (feature.geometry.type == "MultiPolygon") {
        polygons = feature.geometry.coordinates;
        } else { // Single polygon
          polygons[0] = feature.geometry.coordinates;
        }
        $.each(polygons, function (idxpolygon, polygon) {
          $.each (polygon, function (idxline, geojson_line) {
            var line;
            var i;
            var str_line = "M ";
            for (var i=0, l=geojson_line.length;i<l;i+=1) {
              if (i> 0) str_line += " L ";
               xy = worldProjection(geojson_line[i]);
               str_line += xy[0] + " " + xy[1];
             }
             str_line += " Z";
             line = paper.path(str_line);
             line.attr({stroke:border_color,'stroke-width':1,'fill':unsel_color});
             line.country=country;
             $(line.node).click( get_click_handler(country));
             $(line.node).mousemove( get_over_handler(country));
             $(line.node).mouseout( get_out_handler(country));
             svg_borders[country].push(line);
           });
         });
      });
    });
  </script>
</div>